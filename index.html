<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Rosary-mom • Simulation of Charismata</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <style>
    body { background: linear-gradient(135deg, #1a1a2e, #16213e); color: #e0e0e0; }
    .card { transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
    .card:hover { transform: translateY(-12px) scale(1.03); box-shadow: 0 25px 50px -12px rgb(234 179 8 / 0.4); }
    .glow { text-shadow: 0 0 20px #eab308; }
    .holy-spirit { filter: drop-shadow(0 0 30px #eab308); }
  </style>
</head>
<body class="min-h-screen font-sans">

  <!-- Navbar -->
  <nav class="bg-black/80 backdrop-blur-md border-b border-yellow-500/30 sticky top-0 z-50">
    <div class="max-w-6xl mx-auto px-6 py-4 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <i class="fa-solid fa-dove text-3xl text-yellow-400"></i>
        <span class="text-2xl font-bold tracking-widest text-yellow-400">ROSARY<span class="text-white">-mom</span></span>
      </div>
      <div class="text-sm uppercase tracking-widest text-yellow-400/70">Simulation of Charismata</div>
    </div>
  </nav>

  <!-- Hero + Player Stats -->
  <header class="max-w-6xl mx-auto px-6 py-16 text-center">
    <img src="https://picsum.photos/id/1015/800/300" alt="Heiliger Geist" class="mx-auto mb-8 rounded-3xl holy-spirit" style="max-height: 220px;">
    <h1 class="text-5xl md:text-6xl font-bold mb-4 glow">Die 7 Geistesgaben</h1>
    <p class="text-xl text-yellow-200 max-w-2xl mx-auto mb-10">Aktiviere die Charismata des Heiligen Geistes – täglich neu.</p>

    <!-- Player Stats -->
    <div class="inline-flex items-center gap-12 bg-zinc-900/80 border border-yellow-500/30 rounded-3xl px-12 py-6 mb-12">
      <div>
        <div class="text-xs uppercase tracking-widest text-yellow-400/70">Total Grace</div>
        <div id="total-grace" class="text-5xl font-bold text-yellow-400">0</div>
      </div>
      <div class="w-px h-12 bg-yellow-500/30"></div>
      <div>
        <div class="text-xs uppercase tracking-widest text-yellow-400/70">Dein Level</div>
        <div id="player-level" class="text-5xl font-bold text-yellow-400">1</div>
      </div>
    </div>

    <a href="#gifts" class="px-10 py-5 bg-yellow-400 text-black font-semibold rounded-full hover:bg-yellow-300 transition inline-flex items-center gap-3">
      <span>Jetzt Gaben aktivieren</span>
      <i class="fa-solid fa-arrow-down"></i>
    </a>
  </header>

  <!-- Gifts Grid -->
  <section id="gifts" class="max-w-6xl mx-auto px-6 pb-24">
    <div id="gifts-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
  </section>

  <!-- Footer -->
  <footer class="bg-black/90 py-12 text-center text-yellow-400/60 text-sm">
    <p>Made with ❤️ &amp; Gebet • <a href="https://github.com/Rosary-mom/Charisma" class="hover:text-yellow-400">github.com/Rosary-mom/Charisma</a></p>
    <p class="mt-2 text-xs">Charismata Data v1.0 • Simulation of Charismata</p>
  </footer>

  <script>
    let gameData = { charismata: [], player: { total_grace: 0, level: 1 } };

    // Lade Daten + localStorage
    async function loadGame() {
      try {
        const res = await fetch('charismata_data.json');
        if (res.ok) gameData = await res.json();
      } catch (e) {
        console.warn("charismata_data.json nicht gefunden – verwende Fallback");
      }

      // localStorage überschreibt, falls vorhanden
      const saved = localStorage.getItem('charismaGame');
      if (saved) gameData = JSON.parse(saved);

      renderGifts();
      updatePlayerStats();
    }

    function saveGame() {
      localStorage.setItem('charismaGame', JSON.stringify(gameData));
    }

    function activateGift(id) {
      const gift = gameData.charismata.find(g => g.id === id);
      if (!gift) return;

      gift.stats.daily_activations = (gift.stats.daily_activations || 0) + 1;
      gameData.player.total_grace += gift.stats.grace_bonus;
      gameData.player.level = Math.floor(gameData.player.total_grace / 100) + 1;

      saveGame();
      renderGifts();
      updatePlayerStats();

      alert(`✨ ${gift.name_de} aktiviert!\n+${gift.stats.grace_bonus} Grace erhalten`);
    }

    function renderGifts() {
      const container = document.getElementById('gifts-container');
      container.innerHTML = '';

      gameData.charismata.forEach(gift => {
        const cardHTML = `
          <div class="card bg-zinc-900/80 border border-yellow-500/30 rounded-3xl overflow-hidden group">
            <div class="h-2 bg-gradient-to-r from-yellow-400 to-amber-500"></div>
            <div class="p-8">
              <div class="flex items-center justify-between mb-6">
                <div class="text-5xl opacity-80">${gift.icon}</div>
                <div class="text-right">
                  <div class="text-xs uppercase tracking-widest text-yellow-400/70">${gift.stats.category}</div>
                  <div class="text-3xl font-bold text-yellow-400">+${gift.stats.grace_bonus}</div>
                  <div class="text-xs text-yellow-400/50">Grace Bonus</div>
                </div>
              </div>
              <h3 class="text-3xl font-bold text-white mb-3">${gift.name_de}</h3>
              <p class="text-yellow-100/80 leading-relaxed text-[15px]">${gift.description}</p>
            </div>
            <div class="bg-black/50 px-8 py-4 flex items-center justify-between text-xs uppercase tracking-widest">
              <span class="text-emerald-400">${gift.stats.daily_activations || 0}× heute aktiviert</span>
              <button onclick="activateGift('${gift.id}')" 
                      class="bg-yellow-400 text-black px-8 py-3 rounded-2xl font-semibold hover:bg-yellow-300 transition flex items-center gap-2">
                <i class="fa-solid fa-sparkles"></i>
                Aktivieren
              </button>
            </div>
          </div>
        `;
        container.innerHTML += cardHTML;
      });
    }

    function updatePlayerStats() {
      document.getElementById('total-grace').textContent = gameData.player.total_grace;
      document.getElementById('player-level').textContent = gameData.player.level;
    }

    // Start
    window.onload = loadGame;
  </script>
</body>
</html>
